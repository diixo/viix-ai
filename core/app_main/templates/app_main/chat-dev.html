
{% extends "app_main/base.html" %}

{% block meta %}
<title>Title</title>
<meta property="og:title" content="Title">
<meta name="description" content="Description">
<meta property="og:description" content="Description">
{% endblock %}

{% block content %}

<div class="chat-wrapper rounded-5">

  <div class="chat-box mt-4" id="chatBox">

  {% for msg in messages %}
    {% if msg.role == "assistant" %}
    <div class="message bot">
      <div class="avatar"><i class="fa-regular fa-message-bot"></i></div>
      <div class="bubble">{{msg.text}}</div>
    </div>
    {% else %}
    <div class="message user">{{msg.text}}</div>
    {% endif %}
  {% endfor %}

  </div>


  <div class="chat-input rounded-5">
    <form method="POST" class="d-flex align-items-end" id="chatForm">
      {% csrf_token %}
      <textarea id="chatInput" name="query" type="text" class="form-control me-2" rows="1" placeholder="Message to Assistant..."></textarea>
      <button class="btn btn-violet rounded-pill flex-shrink-0 d-flex align-items-center"
        type="submit" value="send_action" name="send_action_btn">
        <span class="material-icons-round">send</span>
      </button>
    </form>
  </div>

</div>

<script>
  const textarea = document.getElementById("chatInput");

  textarea.addEventListener("input", function () {
    this.style.height = "auto";                   // reset height
    this.style.height = this.scrollHeight + "px"; // set new height
  });
</script>

{% endblock %}
